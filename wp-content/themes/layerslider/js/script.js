var fsSelectedProductData={};jQuery(document).ready(function($){window.kmw.defaults.zIndex=10000000;var kmwSettings={maxWidth:700,minWidth:300,spacing:20,into:'#kmw-holder',closeButtonType:2,overlaySettings:{animationIn:{name:'fade',delayOut:0.25,}},animationIn:{name:'rotateTop',delayIn:0,css:{transformPerspective:1000,scale:.8,scaleY:1.2,y:-200,rotationX:30}}};$.extend(true,window.kmw.modal.defaults,kmwSettings);var lsweb={init:function(){$('.accordion-trigger').click(function(){$(this).next('.accordion').toggleClass('accordion-active');$(this).closest('li').toggleClass('accordion-li-active');});$(document).on('click','.close-modal',function(){kmw.modal.close();});$('.open-order-modal').on('click',function(){var $caller=$(this),$modal,quantity,color;kmw.modal.open({content:'#tmpl-order-modal',id:'order-modal-window',closeButton:false,onBeforeOpen:function(){$modal=$('#order-modal-window');$('#your-order').attr('data-payment',$caller.attr('data-payment'));fsSelectedProductData=$caller.data();quantity=fsSelectedProductData.quantity;$('[data-input]',$modal).each(function(){$(this).text($caller.data($(this).data('input')));});$('.product-sites',$modal).html(quantity>1?'(for '+quantity+' sites)':'');$('[data-global-input]',$modal).each(function(){$(this).text($modal.data($(this).data('global-input')));});if($caller.data('coupon')){$('input[name="coupon"]',$modal).val($caller.data('coupon'));}
var customOrderID=$caller.attr('data-custom-order-id');if(customOrderID){customOrderID=customOrderID.substring(0,12);$('input[name="custom-order-id"]',$modal).val(customOrderID);}
if($caller.attr('data-custom-order')){$modal.find('.custom-order').css({display:'block'});}
if($caller.data('color')){color=$caller.data('color');}else if($caller.attr('class').indexOf('set-color')!==-1){var classNames=$caller.attr('class').split(' ');for(var c=0;c<classNames.length;c++){if(classNames[c].indexOf('color')!==-1){color=classNames[c].split('color-')[1];}}}
if(color){$('.get-bg-color',$modal).each(function(){$(this).removeClass('get-bg-color').addClass('bg-'+color);});$('.get-text-color',$modal).each(function(){$(this).removeClass('get-text-color').addClass('color-'+color);});}}});});var closeModal=function(){kmw.modal.close();};$(document).on('click','.volume-licenses span:not(.custom-price)',function(){var $selected=$(this),$card=$selected.closest('.col'),type=$card.hasClass('yearly')?'Yearly':'',qty=parseInt($selected.text()),price=parseInt($selected.data('price')),sites=parseInt($selected.data('sites')),origPrice=window['professionalLicense'+type].productPrice.original[qty],savePrice=origPrice-price;$card.find('.volume-license-price').text(price);$card.find('.volume-license-sites').text(sites);if(savePrice&&savePrice>0){$card.find('.volume-license-save-price').text(savePrice);}
$card.find('.volume-license-button').data({quantity:qty,price:price,supportPrice:type=='Yearly'?false:window.professionalLicense.supportPrice[qty]});});$(document).on('click','button.checkout',function(event){var $button=$(this),$modal=$('#order-modal-window');$support=$('input[name="extend-support"]',$modal);$popups=$('input[name="webshopworks-popups"]',$modal);if($support.prop('checked')){$button.text('Processing ...').attr('disabled','disabled');var ajaxData={action:'add_support_item',item:fsSelectedProductData.path,quantity:fsSelectedProductData.quantity||1};if($popups.prop('checked')){ajaxData.webshopworkspopups=1;}
if($('input[name="coupon"]',$modal).val()){ajaxData.coupon=$('input[name="coupon"]',$modal).val();}
if($('input[name="custom-order-id"]',$modal).val()){ajaxData.customOrderID=$('input[name="custom-order-id"]',$modal).val();}
$.getJSON(KM.ajaxurl,ajaxData,function(data){closeModal();$button.removeAttr('disabled').text('Secure Checkout');if(data&&data.success){fastspring.builder.reset();fastspring.builder.secure(data.payload,data.key);fastspring.builder.checkout();}});}else{closeModal();var orderObj=[{path:fsSelectedProductData.path,quantity:fsSelectedProductData.quantity||1}];if($popups.prop('checked')){orderObj.unshift({path:'webshopworks-popups'});}
var sessionObject={reset:true,products:orderObj,checkout:true};if($('input[name="coupon"]',$modal).val()){sessionObject.coupon=$('input[name="coupon"]',$modal).val();}
if($('input[name="custom-order-id"]',$modal).val()){sessionObject.tags={customOrderId:$('input[name="custom-order-id"]',$modal).val()};}
fastspring.builder.push(sessionObject);}});$(document).on('click','.open-in-stock-modal',function(e){e.preventDefault();kmw.modal.open({content:'#tmpl-in-stock-modal'});});$(document).on('click','.open-professional-modal',function(e){e.preventDefault();kmw.modal.open({content:'#tmpl-professional-modal',id:'professional-modal-window'});});$(document).on('click','.open-ww-popup-details',function(){kmw.modal.open({content:'#tmpl-popups-details-modal',id:'webshopworks-popups-additional-info'})});$(document).on('click','.open-ww-popup-checkout',function(){fastspring.builder.reset()
fastspring.builder.add('webshopworks-popups');fastspring.builder.checkout();});if(window.location.hash){var hash=window.location.hash.substring(1);if(document.location.href.indexOf('pricing')!==-1){var $button=$('button.open-order-modal[data-path="'+hash+'"]:eq(0)');if($button.length){setTimeout(function(){$button.click();},500);}}
if(KM.page==='webshopworks'||KM.page==='popups'){if(hash==='purchase'){setTimeout(function(){$('.open-ww-popup-checkout').click();},3000);}else if(hash==='info'){setTimeout(function(){$('.open-ww-popup-details').click();},2000);}else{setTimeout(function(){$('.popup-item-'+hash).click();},1000)}}}
if(document.location.href.indexOf('cart_id')!==-1){var url=new URL(window.location.href),cart_id=url.searchParams.get('cart_id');$.getJSON(KM.ajaxurl,{action:'recover_checkout',cart_id:cart_id},function(data){if(data&&data.success){fastspring.builder.reset();fastspring.builder.secure(data.payload,data.key);if(data.attributes.contact){fastspring.builder.recognize(data.attributes.contact);}
fastspring.builder.checkout();}});}
if(document.location.href.indexOf('?co=')!==-1){$('.open-custom-order-modal').click();}
$('section#subscription li').on('click',function(){$('#pricing-wrapper').attr('data-payment',$(this).attr('data-payment'));});var lastSelectedCreatorIs=document.location.href.indexOf('webshopworks')==-1?'kreatura':'webshopworks';$('.popups-webshopworks-slider').on('click',function(){$('.popups-webshopworks').click();});$('.popups-webshopworks').on('click',function(){if(lastSelectedCreatorIs=='kreatura'){$('.popups-header').layerSlider(2);lastSelectedCreatorIs='webshopworks';}});$('.popups-kreatura').on('click',function(){if(lastSelectedCreatorIs=='webshopworks'){$('.popups-header').layerSlider(1);lastSelectedCreatorIs='kreatura'}});$(window).on('resize',function(){lsweb.winWidth=$(window).width();lsweb.winHeight=$(window).height();var vh=document.documentElement.clientHeight*0.01;document.documentElement.style.setProperty('--vh',vh+'px');});$(window).trigger('resize');$(window).trigger('scroll');$('#ga-out-out').on('click',function(e){e.preventDefault();gaOptout();alert('You have successfully opted-out of Google Analytics on this site.');});}};lsweb.init();$('.counter').each(function(index){var $el=$(this),d=$el.data(),from=d['counterFrom']||1,c={val:from},to=d['counterTo'],duration=(d['counterDuration']||1000)/1000,delay=d['counterDelay']||0,before=d['counterBefore']||'',after=d['counterAfter']||'',indexDelay=d['counterIndexDelay']||250;$el.css('height',parseFloat($el.css('line-height'))/parseFloat($('html').css('font-size'))+'rem');var waypoint=new Waypoint({element:$el[0],handler:function(){if(!$el.hasClass('counting')){$el.addClass('counting');setTimeout(function(){TweenMax.fromTo(c,duration,{val:from},{val:to,roundProps:'val',ease:Quad.easeOut,onUpdate:function(){$el.text(before+Math.ceil(c.val)+after);},onComplete:function(){$el.removeClass('counting');if(d['counterEnd']){$el.html('<span class="counter-end">'+d['counterEnd']+'</span>');}}});TweenMax.fromTo($el[0],duration/3,{scale:.1,opacity:0},{scale:1,opacity:1,ease:Quad.easeOut});waypoint.destroy();},delay||index*indexDelay);}},offset:'bottom-in-view'});});var $changeNavElements=$('.change-nav-scheme'),navElementsLength=$changeNavElements.length,defaultNavScheme=$('body').data('navScheme')?$('body').data('navScheme'):'light';$changeNavElements.each(function(){var $el=$(this);var waypoint=new Waypoint({element:$el[0],handler:function(direction){$('body').removeClass('nav-main-dark nav-main-purple nav-main-transparent nav-main-transparent-light');if(direction==='down'){$('body').addClass('nav-main-'+$el.attr('data-nav-scheme'));}else{var classIndex=$changeNavElements.index($el);if(--classIndex<0){$('body').addClass('nav-main-'+defaultNavScheme);}else{var $targetItem=$($changeNavElements[classIndex]);$('body').addClass('nav-main-'+$targetItem.attr('data-nav-scheme'));}}}});});$('[data-dropdown]').each(function(index){$(this).on('mouseenter',function(){Dropdown.changeTo($(this),$(this).data('dropdown'));}).on('mouseleave',function(){Dropdown.hide();});});$('#dropdown').on('mouseenter',function(){Dropdown.cancelHide();}).on('mouseleave',function(){Dropdown.hide();});var Dropdown={$menuItem:$(),$menuParent:$(),$wrapper:$('#dropdown-outer-wrapper'),$dropdown:$('#dropdown'),$inner:$('#dropdown .inner-wrapper'),$curSetion:null,$allSections:$('#dropdown section'),$arrow:$('#dropdown .arrow-up'),isHidden:true,show:function(){this.$dropdown.addClass('dropdown-visible');this.$wrapper.addClass('dropdown-visible');this.isHidden=false;},changeTo:function($menuItem,id){this.$menuParent.removeClass('hovered');this.$menuItem=$menuItem;this.$menuParent=this.$menuItem.parent();if(this.hideTimer){this.cancelHide();}
var $curSection=$('#'+id),curIndex=$curSection.index()+1;this.$allSections.each(function(sIndex){if(sIndex+1<curIndex){$(this).addClass('dropdown-section-left').removeClass('dropdown-section-right').removeClass('dropdown-section-visible');}else if(sIndex+1>curIndex){$(this).addClass('dropdown-section-right').removeClass('dropdown-section-left').removeClass('dropdown-section-visible');}else{$(this).removeClass('dropdown-section-right').removeClass('dropdown-section-left').addClass('dropdown-section-visible');}});if(this.isHidden){this.$inner.css({width:'auto',height:'auto'});this.$inner.css({width:$curSection.css('width'),height:$curSection.css('height')});this.show();}else{this.$inner.css({width:$curSection.css('width'),height:$curSection.css('height')});}
this.setArrow();},setArrow:function(){this.$arrow.css({'transform':'translateZ(0) translateX('+((this.$menuItem.offset().left+this.$menuItem.outerWidth()/2)-($(document).width()/2))+'px) translateX(-50%)'});this.$menuParent.addClass('hovered');},hide:function(){var dd=this;this.hideTimer=setTimeout(function(){dd.$allSections.removeClass('dropdown-section-right').removeClass('dropdown-section-left').removeClass('dropdown-section-visible');dd.$dropdown.removeClass('dropdown-visible');dd.$wrapper.removeClass('dropdown-visible');dd.$menuParent.removeClass('hovered');dd.isHidden=true;},50);},cancelHide:function(){clearTimeout(this.hideTimer);}};$('nav#main .hamburger').on('click',function(){$('nav#main').toggleClass('mobile-opened');});$('nav#main .template .close-template-menu').on('click',function(e){e.preventDefault();$('nav#main').addClass('template-menu-closed');});$('.km-transition').each(function(index){var el=this,$el=$(el),offset=$el.data('kmOffset')?$el.data('kmOffset'):'bottom-in-view'
var waypoint=new Waypoint({element:el,handler:function(direction){switch(direction){case 'down':$el.addClass('km-visible');break;case 'up':if($el.hasClass('km-two-way')){$el.removeClass('km-visible');}
break;}},offset:offset});});$('#feature-instant-results input[type=text]').on('keyup change',function(e){interact();});var interactTween;var interact=function(){if(interactTween){interactTween.progress(0).kill();}
interactTween=TweenMax.fromTo($('#interact-with-me')[0],1.4,{transformPerspective:300,x:0,y:0,scale:1,rotation:0,rotationY:0},{ease:Quart.easeInOut,repeat:-1,yoyo:true,x:parseFloat($('#lsf-move-x').val())||0,y:parseFloat($('#lsf-move-y').val())||0,scale:parseFloat($('#lsf-scale').val())||1,rotation:parseFloat($('#lsf-rotate').val())||0,rotationY:parseFloat($('#lsf-rotate-y').val())||0});};$('#lsf-reset').on('click',function(){$('#feature-instant-results input').each(function(){$(this).val('');});if(interactTween){interactTween.progress(0).kill();}});$apislider=$('#layerslider-api .ls-wp-container');$('#api-next-slide').on('click',function(){$apislider.layerSlider('next');});$('#api-prev-slide').on('click',function(){$apislider.layerSlider('prev');});$('#api-replay-slide').on('click',function(){$apislider.layerSlider('replay');});$('#api-reverse-play').on('click',function(){$apislider.layerSlider('reverse',true);});$('#api-play-faster').on('click',function(){window.customTimeScale=window.customTimeScale*2||2;if(window.customTimeScale>8){window.customTimeScale=8;}
$apislider.layerSlider('eventData').data.transitions._slideTimeline.timeScale(window.customTimeScale);});$('#api-play-slower').on('click',function(){window.customTimeScale=window.customTimeScale/2||0.5;if(window.customTimeScale<0.25){window.customTimeScale=0.25;}
$apislider.layerSlider('eventData').data.transitions._slideTimeline.timeScale(window.customTimeScale);});window.APISliderIsPlaying=true;$('#api-pause-slider').on('click',function(){var method=window.APISliderIsPlaying?'pause':'resume';$(this).find('span').text(window.APISliderIsPlaying?'resume':'pause');window.APISliderIsPlaying=!window.APISliderIsPlaying;$apislider.layerSlider(method);});$('#features-platform .button-group').on('click','[data-platform]',function(){if($(this).data('platform')==='jq'){$('#features-platform .button-group').addClass('show-jq-features-only');}else{$('#features-platform .button-group').removeClass('show-jq-features-only');}
$('#features--list').removeClass('show-wp-features show-jq-features').addClass('show-'+$(this).data('platform')+'-features');});$('.load-popup-templates').on('click','.item',function(){loadPopupTemplate($(this).find('.box'),$(this).data('id'));});$(document).on('click','#popup-show-more-info',function(){loadPopupTemplate($([]),256);});var pageRank=[];$('#press-logos a').each(function(){pageRank.push($(this).data('page-rank'));});pageRank.sort(function(a,b){return a-b;});for(var p=0;p<pageRank.length;p++){$('#press-logos a[data-page-rank='+pageRank[p]+']').appendTo($('#press-logos'));}
jQuery(document).on('click','.thank-you-license-key-button',function(e){e.preventDefault();var $input=jQuery('.thank-you-license-key-input'),$button=jQuery('.thank-you-license-key-button');$input[0].select();$input[0].setSelectionRange(0,99999);if(document.execCommand('copy')){$button.addClass('copied').find('span').text('Copied');$input[0].setSelectionRange(0,0);$input[0].blur();setTimeout(function(){$button.removeClass('copied').find('span').text('Copy');},2000);}});});var loadPopupTemplate=function($item,popupId){var $=jQuery;var reqData={action:'load_ww_popup',id:popupId};var $popup=$('#layerslider_'+popupId);if($popup.length){return;}
$item.addClass('popup-is-loading');setTimeout(function(){$item.removeClass('popup-is-loading');},1500);$.get(KM.ajaxurl,reqData,function(html){if(html){html=html.replace('popupShowOnTimeout: 1','popupShowOnTimeout: 0');var $markup=$(html).appendTo('body'),$popup=$markup.find('.ls-wp-container');$popup.on('popupDidClose',function(event,slider){$(slider.target).layerSlider('destroy',true);});}});};var latestOrderData;function fsErrorCallback(code,message){console.log("FASTSPRING ERROR: ",code,message);}
function fsPopupClosed(data){if(data&&data.id&&latestOrderData){var licenseKey=fsFindLicenseKey(latestOrderData);if(licenseKey){window.location.href='/thank-you/?license-key='+licenseKey;}else if(fsFindProduct(latestOrderData,'webshopworks-popups')){kmw.modal.open({id:'webshopworks-popups-purchase-modal',content:'#tmpl-popups-purchase-modal',maxWidth:800,closeOnEscape:false,overlaySettings:{closeOnClick:false}});}}else{}}
function fsWebhookReceived(orderData){latestOrderData=orderData;}
function decorateURL(url){var linkerParam=null;if(window['ga']){ga(function(){var trackers=ga.getAll();linkerParam=trackers[0].get('linkerParam');});}
return(linkerParam?url+'?'+linkerParam:url);}
function fsFindProduct(orderData,productPath){var result=false;if(orderData&&orderData.items){orderData.items.forEach(function(item,itemIndex){if(item.product===productPath){result=true;}});}
return result;}
function fsFindLicenseKey(orderData){if(orderData&&orderData.items){var license;orderData.items.forEach(function(item,itemIndex){if(item.fulfillments){for(fulfillmentKey in item.fulfillments){if(fulfillmentKey.indexOf('license')!==-1){var licenseObj=item.fulfillments[fulfillmentKey];license=licenseObj[0].license;}}}});}
return license||'';}